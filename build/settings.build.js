(()=>{"use strict";var e={n:s=>{var n=s&&s.__esModule?()=>s.default:()=>s;return e.d(n,{a:n}),n},d:(s,n)=>{for(var t in n)e.o(n,t)&&!e.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.React;var n=e.n(s);const t=window.wp.element,i=window.wp.i18n,r=window.wp.components,a=window.wp.apiFetch;var o=e.n(a);const c=window.wp.primitives,l=window.ReactJSXRuntime,d=(0,l.jsx)(c.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(c.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"})}),p=()=>{const[e,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[_,w]=(0,t.useState)(!1),[x,u]=(0,t.useState)("");return(0,l.jsxs)("div",{className:"spire-sync-settings-container",children:[(0,l.jsx)("h1",{children:(0,i.__)("Spire Sync Settings","spire-sync")}),x&&(0,l.jsx)(r.Notice,{status:"success",isDismissible:!1,children:x}),(0,l.jsx)(r.Panel,{header:"Settings",children:(0,l.jsx)(n().Fragment,{children:(0,l.jsxs)(r.PanelBody,{title:(0,i.__)("API Settings","spire-sync"),initialOpen:!0,icon:d,children:[(0,l.jsx)(r.PanelRow,{children:(0,l.jsx)(r.TextControl,{__next40pxDefaultSize:!0,label:(0,i.__)("Base URL","spire-sync"),value:e,onChange:e=>s(e||""),help:(0,i.__)("Enter the base URL for the Spire API (e.g., http://example.com/api/v2)","spire-sync")})}),(0,l.jsx)(r.PanelRow,{children:(0,l.jsx)(r.TextControl,{__next40pxDefaultSize:!0,label:(0,i.__)("API Username","spire-sync"),value:a,onChange:e=>c(e||"")})}),(0,l.jsx)(r.PanelRow,{children:(0,l.jsx)(r.TextControl,{__next40pxDefaultSize:!0,label:(0,i.__)("API Password","spire-sync"),type:"password",value:p,onChange:e=>h(e||"")})})]})},"0")}),(0,l.jsx)(r.Button,{variant:"primary",onClick:()=>{w(!0),u("");const s={api_username:a,api_password:p,base_url:e};o()({path:"/spire_sync/v1/settings",method:"POST",data:s}).then((e=>{u((0,i.__)("Settings saved successfully.","spire-sync")),w(!1),h("")})).catch((e=>{console.error(e),u((0,i.__)("Error saving settings.","spire-sync")),w(!1)}))},disabled:_,children:_?(0,i.__)("Saving...","spire-sync"):(0,i.__)("Save Settings","spire-sync")})]})};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("spire-sync-settings-root");e&&(0,t.createRoot)(e).render((0,l.jsx)(p,{}))}))})();